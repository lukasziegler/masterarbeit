\section{Implementation}
\label{sec:implementation}
	% Chapter concerning the Technical Realization

	In this chapter we will deal with the infrastructure and technical realization of the public display survey platform. First off, we will start with the requirements for the survey platform (section \ref{sec:implementation:requirements}). Subsequently the architecture resulting from the design decisions will be the main focus (section \ref{sec:implementation:design-decisions}). To facilitate the training period for successors we will also take a brief look at the software model (section \ref{sec:implementation:modeling}). For more specific information and for information regarding maintenance of the project, please refer to the Documentation found on the CD enclosed or on the GitHub repository (see Appendix \ref{appendix:documentation}).

	In figure \ref{fig:4-pdsurvey-platform} a brief overview of the \textit{PDSurvey} platform and its components is given. The platform consists of three major parts: a backend for display providers (PDAdmin), a RESTful server (PDServer) and the user interface itself, being embedded on the end user devices (public displays, tablets, smartphones or other devices). 






\subsection{Requirements}
\label{sec:implementation:requirements}

	The starting point for the PDSurvey platform and the Master's thesis itself was the official announcement\footnote{\url{http://www.medien.ifi.lmu.de/lehre/arbeiten/detail.xhtml-php?pub=alt_pdsurvey} (accessed on March 24, 2015)}, describing the scope of the thesis. This problem statement already included first requirements for the survey platform to develop, and was also a trigger for further literature research and talks with people from the industry.

	% Official Problem statement
	\begin{enumerate}[itemsep=0pt] 
	\item development of a survey tool that allows interactive public display installations to be comprehensively assessed 
	\item a web-based survey platform will be implemented that can easily be used to evaluate and compare public displays through different channels 
	\item different channels to support: 1) evaluation directly at
	the display or 2) through a (mobile) website that allows participation also via a smartphone
	or tablet.
	\item configuration options for public display owners
	\end{enumerate}

	Additional requirements, dervived from the previous and complemented with additional ones, are listed below:

	% Derived requirements
	\begin{itemize}[itemsep=0pt] 
	\item easy \textbf{embedding of questionnaires} on websites of public display owners (provide API / embed code)
	\item support of \textbf{various devices}: public displays of all sizes, tablets, phablets, smartphones, desktop devices (responsive web design)
	\item create an \textbf{open research platform} (host project and documentation on GitHub, release it as open source, publish and invite fellow researchers)
	\item allow for both \textbf{quantitative and qualitative} metods of data collection
	\end{itemize}

	% + RESULTS FROM LITERATURE RESEARCH (TODO)

	These derived requirements had an impact on the chosen architecture, which will be discussed in the following.



\subsection{Design Decisions}
\label{sec:implementation:design-decisions}

	After having assessed all requirements for the platform (see section \ref{sec:implementation:requirements}), the next step was making design decisions for the software, programming language and frameworks to use, having an impact on the architecture.


	\paragraph{Programming language}

		Due to the requirements and objective to support a large number of devices, operating systems, and form factors, a device-independent programming language was preferred. 
		The choice fell on Javascript, not just due to the growing popularity\footnote{\url{http://www.sitepoint.com/javascript-internet-things/} (accessed on November 27, 2014)} since it can be used on the biggest number of devices, also having the benefit of only having to use one programming language for developing the backend as well as the frontend, thanks to the MEAN stack.

		Alternative languages considered were: PHP, Python, Ruby, Java and ASP.NET. The biggest drawback was the additional workload on having to maintain the object model on multiple platforms. With Javascript it is possible to use the same model across all platforms (backend, frontend, server).

		% TODO: add citation

	\paragraph{Frontend}

		The next question to be answered was which frontend technologies to use, leading to the question whether to follow the single-page application approach or not. As of 2014 the JavaScript model-view frameworks most frequently used for creating single-page apps are Angular.js, Ember.js and Backbone.js. Purely based on numbers Angular.js is the clear favorite, it has by far the largest user base on GitHub, Stackoverflow, and Youtube. When comparing the number of third-party modules, Angular.js also takes the lead with 800 ngmodules vs. 236 Backbone.js backplugs vs. 21 emberaddons. All these factors together indicate a short training time and give hope for making good progress for beginners. These were amongst other things	\footnote{\url{https://www.airpair.com/js/javascript-framework-comparison} (accessed on January 11, 2015)} the reasons why we chose Angular.js for this project, since the scope is also for other students to further enhance the PDSurvey platform.

		For the CSS framework of the PDSurvey platform, Bootstrap\footnote{\url{http://getbootstrap.com/} (accessed on December 1, 2014)} was our framework of choice. Reasons for choosing Bootstrap were the large community, extensive documentation with helpful examples, large number of free tutorials and templates, its integration with Angular.js (AngulatStrap\footnote{\url{http://mgcrea.github.io/angular-strap/}} and AngularUI), and its short training time.
		Alternatives considered were Foundation Framework by Zurb, however at the time of writing there was no prefabricated integration for Foundation and Angular.js.
		A good overview of currently popular frontend frameworks: \url{http://www.sitepoint.com/grid-system-comparison-bootstrap-vs-foundation/} (accessed March 24, 2015).


		% Express.js was chosen over Resty, simply due to its popularity and because it already suits the MEAN stack philosophy
	


	\paragraph{Backend}

		For the backend server it was of importance to have an easy administrator interface and easily being able to exchange data with all clients. 


			Node.js
			Express.js
			Mongoose.js\footnote{\url{http://mongoosejs.com/} (accessed on November 14, 2014)}


		> give a short overview of alternatives
		> say because of embedding + frontend, it seems obvious to choose JavaScript
		> Server: NodeJS is currently becoming the de-facto standard for scalable and RESTful web services.

		reasons for choosing Node.js


			\begin{enumerate}[itemsep=0pt] 
			\item scalable
			\item modular / extensible
			\item multilingual / internationalization (i18n)

	        \item \textbf{Backend}: Why I chose Node.js
	        \item Frameworks in Node.js: Connect, Express, Koa, ... which ones I chose why
	        \item Discussion of pro/con Node.js: http://www.heise.de/developer/artikel/2x-Nein-4x-Ja-Szenarien-fuer-Node-js-2111050.html
	        \item Prinzip und Verwendung von Middlewares in Node.js (wegen der Internationalisierung und Authentisierung) http://www.heise.de/developer/artikel/REST-Webservices-mit-Node-js-Teil-1-Connect-als-Fundament-1802258.html?view=print

			\end{enumerate}


		% + Interaction / Communication
	
		> REST vs SOAP: why I chose REST

		Should a component not support HTML or JavaScript execution, then the required surveys can still be communicated directly with the REST API through rudimentary HTTP function calls.

		Based on these requirements and the feedback received from industry experts, a choice towards Node.js and to fully go along with MEAN stack was self-evident.




	\paragraph{Database}

		Another fundamental aspect presented the question where to store all of the data. A big variety of professional and open-source database management systems (DBMS) already exist on the market, but ...

		Criteria for choosing the right DBMS for this project: size of community, suitability for prototyping, and integration with Node.js/Angular.js.

		

		% Comparison in between ...

		% My choice

		Not only due to it's popularity, but also 
		% - wanted to learn something new
		% - popular in industry
		% - MEAN stack


		> SQL vs NoSQL: NoSQL better for 
		> MongoDB is the most popular NoSQL database as of now and integrates seamlessly with the MEAN stack (MongoDB, ExpressJS, AngularJS, NodeJS).




	\paragraph{Hosting}

		For the hosting of the platform a free and easy scalable solution was of importance. Our first choice was Heroku\footnote{https://www.heroku.com/}, due to its simplicity of setup, its native support of Node.js and the seamless integration with Mongolab\footnote{https://mongolab.com/}, hosting our MongoDB.

		% TODO: IaaS vs PaaS: https://www.youtube.com/watch?v=Q8jZHc0NS6A
		% give reasons why I chose PaaS (Platform as a Service)

		    % Heroku        PaaS
		    % IBM BlueMix   PaaS
		    % Amawon AWS    IaaS
		    % self hosting  IaaS

		    %   comparison  http://smashingboxes.com/ideas/heroku-vs-amazon-web-services


		Alternative were Google App Engine, IBM BlueMix, Amazon Web Services (Amazon EC2) or hosting everything on local or virtualized machines at our university. However for our scenario all of the above options had their drawbacks in comparison to Heroku. Google App Engine (as of December 2014) still had no native support for Node.js and custom runtimes had to be used to get Node.js support up and running. IBM BlueMix just got overhauled, offered full out-of-the-box Node.js support, however they only the first 30 days were free and the pricing model wasn't as attractive. Amazon Web Services offering a Infrastructure as a Service (IaaS), would have required too much administration of the server, which would have slowed down the main objective of the project, the development of the survey platform. The same goes for the last option, hosting a MEAN-stack environment on our own servers at LMU Munich. All of the above are well-known solutions in the industry, however due to simplicity and ease of use we chose Heroku.






\clearpage
\input{4c_modeling}
\label{sec:implementation:modeling}

Modeling
	Software Model
	+ Dependencies in between them
	Users
	User Stories
	REST API


Used the extreme programming\footnote{\url{http://www.extremeprogramming.org/rules.html} (accessed on November 13, 2014)} approach: user stories, release planning, release schedule, small releases, iterating




\subsection{PDSurvey Platform}

	The architecture for the public survey platform can be split into three main sections

	\begin{figure}%[btph]
	    \begin{center}
	        \includegraphics[width=.7\columnwidth]{img/4_implementation/4-overview}
	    \end{center}
	 \caption{Overview of the PDSurvey platform}
	 \label{fig:4-pdsurvey-platform}
	\end{figure}


	\begin{enumerate}
	\item begin with describing what the platform does, which views it has (show screenshots).
	\item describe the client
	\item also show the mockup / technical demonstration of the JavaScript embed code. It was a proof-of-concept, demonstrating the feasibility of embedding questionnaires as an overlay (additional DIV layer), injected via one (minified) line of Javascript. % bereits geloest (pdsurvey/public/tracking/survey.js bzw. testing/tracking-code/index.html)
	\end{enumerate}


		For administrative purposes we created a RESTful backend (PDBackend), which enables the creation, management and distribution of surveys to public displays. Attached to this backend there is the   a responsive client 


	\subsubsection{Embed Code}

	https://developers.google.com/analytics/resources/concepts/gaConceptsTrackingOverview

	http://en.wikipedia.org/wiki/Web_bug

	http://stackoverflow.com/questions/3534524/how-does-the-embedded-google-analytics-javascript-work




\subsection{Not sure about...}

	\begin{enumerate}

	\item \textbf{4.4 Implementation}
		\item leave out!!
		\item these aspets are all part of the MKDOCS documentation inside the repository!

	\item \textbf{Maybe:}
		\item challenges		>> for presentation
		\item problems		>> presentation or docu
		\item frameworks 		>> documentation
		\item deployment		>> documentation

	\end{enumerate}


	\subsubsection{Prestudy}

	First feedback regarding the platform, before launching it. Either I will use this section, or I will make the expert interview (see section \ref{sec:expert-interview}).
